{"version":3,"sources":["webpack:///src/components/searchList.vue","webpack:///./src/components/searchList.vue?79cb","webpack:///./src/components/searchList.vue","webpack:///src/pages/views/search.vue","webpack:///./src/pages/views/search.vue?b6d5","webpack:///./src/pages/views/search.vue"],"names":["searchList","data","songs","limit","page","suggest","haveMore","searchShow","searching","props","query","type","String","default","components","loading","mounted","watch","val","this","search","methods","_this","Object","api","then","res","result","ret","forEach","item","push","song","catch","e","searchMore","_this2","length","list","concat","$emit","songDetail","param","id","image","coverImgUrl","title","name","playCount","trackCount","selectItem","singerDetail","img1v1Url","components_searchList","render","_vm","_h","$createElement","_c","_self","staticClass","style","pointer-events","_v","artists","on","click","$event","stopPropagation","directives","rawName","value","expression","key","attrs","width","height","_s","_e","playlists","albums","artist","_l","index","_m","singer","staticStyle","display","staticRenderFns","src_components_searchList","__webpack_require__","normalizeComponent","ssrContext","views_search","hots","pt","computed","extends_default","vuex_esm","screen","$refs","header","clientHeight","currentSong","code","playBySong","saveSearchHistory","setSearchHistory","setSearch","input","blur","$router","params","$bus","emit","self","clear","scroll","components_scroll","currentSong.id","pages_views_search","ref","go","placeholder","domProps","target","composing","overflow","pullup","scrollToEnd","padding-bottom","first","searchHistoryList","search_Component","search_normalizeComponent","__webpack_exports__"],"mappings":"sOAoCAA,GACAC,KADA,WAEA,OACAC,SACAC,MAAA,GACAC,KAAA,EACAC,WACAC,UAAA,EACAC,YAAA,EACAC,WAAA,IAGAC,OACAC,OACAC,KAAAC,OACAC,QAAA,KAGAC,YACAC,UAAA,GAEAC,QArBA,aAsBAC,OACAP,MADA,SACAQ,GACA,QAAAA,EAIA,OAHAC,KAAAd,WACAc,KAAAjB,cACAiB,KAAAb,UAAA,GAGAa,KAAAd,WACAc,KAAAjB,SACAiB,KAAAZ,YAAA,EACAY,KAAAf,KAAA,EACAe,KAAAb,UAAA,EACAa,KAAAC,WAGAC,SACAD,OADA,WACA,IAAAE,EAAAH,KACAA,KAAAZ,YAAA,EACAY,KAAAb,UAAA,EACAa,KAAAX,WAAA,EACMe,OAAAC,EAAA,EAAAD,CAANJ,KAAAT,MAAAS,KAAAf,MACAqB,KAAA,SAAAC,GACA,GAAAA,EAAAzB,KAAA0B,OAAAzB,MAAA,CAIA,IACA0B,KADAF,EAAAzB,KAAA0B,OAAAzB,MAEA2B,QAAA,SAAAC,GACAF,EAAAG,KAAAR,OAAAS,EAAA,EAAAT,CAAAO,MAEAR,EAAApB,MAAA0B,EACAN,EAAAd,WAAA,OATAc,EAAAhB,UAAA,IAWA2B,MAAA,SAAAC,GACAZ,EAAAd,WAAA,IAEAW,KAAAf,MAAAe,KAAAhB,MACMoB,OAAAC,EAAA,EAAAD,CAANJ,KAAAT,OAAAe,KAAA,SAAAC,GACAJ,EAAAjB,QAAAqB,EAAAzB,KAAA0B,UAGAQ,WA3BA,WA2BA,IAAAC,EAAAjB,KACAA,KAAAb,UAGAa,KAAAjB,MAAAmC,QAGMd,OAAAC,EAAA,EAAAD,CAANJ,KAAAT,MAAAS,KAAAf,MAAAqB,KAAA,SAAAC,GACA,IAAAY,EAAAZ,EAAAzB,KAAA0B,OAAAzB,MACA,GAAAwB,EAAAzB,KAAA0B,OAAAzB,MAAA,CAIA,IAAA0B,KACAU,EAAAT,QAAA,SAAAC,GACAF,EAAAG,KAAAR,OAAAS,EAAA,EAAAT,CAAAO,MAEAM,EAAAlC,MAAAkC,EAAAlC,MAAAqC,OAAAX,GACAQ,EAAAI,MAAA,WACAJ,EAAAhC,MAAAgC,EAAAjC,WATAiC,EAAA9B,UAAA,KAYAmC,WAjDA,SAiDAX,GACA,IAAAY,GAAAC,GAAAb,EAAAa,GAAAC,MAAAd,EAAAe,YAAAC,MAAAhB,EAAAiB,KAAAC,UAAAlB,EAAAkB,UAAAC,WAAAnB,EAAAmB,YACA9B,KAAAqB,MAAA,aAAAE,IAEAQ,WArDA,SAqDApB,GACAX,KAAAqB,MAAA,aAAAV,IAEAqB,aAxDA,SAwDArB,GACA,IAAAY,GAAAC,GAAAb,EAAAa,GAAAC,MAAAd,EAAAsB,UAAAN,MAAAhB,EAAAiB,MACA5B,KAAAqB,MAAA,eAAAE,MCjIeW,GADEC,OAFjB,WAA0B,IAAAC,EAAApC,KAAaqC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,gBAAAC,OAAoCC,iBAAA,UAA0BJ,EAAA,OAAYE,YAAA,aAAsBL,EAAAhD,YAAAgD,EAAA7C,OAAA6C,EAAArD,MAAAmC,OAAA,EAAAqB,EAAA,OAAmEE,YAAA,mBAA6BF,EAAA,KAAUE,YAAA,UAAoBL,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAR,EAAAlD,QAAA2D,SAAAT,EAAAlD,QAAA2D,QAAA,GAAAN,EAAA,OAAuFE,YAAA,sBAAAK,IAAsCC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAJ,aAAAI,EAAAlD,QAAA2D,QAAA,QAA2CN,EAAA,OAAYW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,MAAAhB,EAAAlD,QAAA2D,QAAA,aAAAQ,WAAA,iCAAgHC,IAAAlB,EAAAlD,QAAA2D,QAAA,GAAAZ,UAAAsB,OAA8CC,MAAA,KAAAC,OAAA,QAA4BrB,EAAAQ,GAAA,KAAAL,EAAA,QAAAH,EAAAQ,GAAA,MAAAR,EAAAsB,GAAAtB,EAAAlD,QAAA2D,QAAA,GAAAjB,WAAAQ,EAAAuB,KAAAvB,EAAAQ,GAAA,KAAAR,EAAAlD,QAAA0E,WAAAxB,EAAAlD,QAAA0E,UAAA,GAAArB,EAAA,OAAgKE,YAAA,sBAAAK,IAAsCC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAd,WAAAc,EAAAlD,QAAA0E,UAAA,QAA2CrB,EAAA,OAAYW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,MAAAhB,EAAAlD,QAAA0E,UAAA,eAAAP,WAAA,qCAAwHC,IAAAlB,EAAAlD,QAAA0E,UAAA,GAAAlC,YAAA6B,OAAkDC,MAAA,KAAAC,OAAA,QAA4BrB,EAAAQ,GAAA,KAAAL,EAAA,OAAwBE,YAAA,SAAmBF,EAAA,KAAAH,EAAAQ,GAAA,MAAAR,EAAAsB,GAAAtB,EAAAlD,QAAA0E,UAAA,GAAAhC,SAAAQ,EAAAQ,GAAA,KAAAR,EAAAlD,QAAA2E,QAAAzB,EAAAlD,QAAA2E,OAAA,GAAAtB,EAAA,KAAgIE,YAAA,WAAqBL,EAAAQ,GAAAR,EAAAsB,GAAAtB,EAAAlD,QAAA2E,OAAA,GAAAC,OAAAlC,SAAAQ,EAAAuB,SAAAvB,EAAAuB,OAAAvB,EAAAuB,KAAAvB,EAAAQ,GAAA,KAAAL,EAAA,MAA4GE,YAAA,iBAA2BL,EAAA2B,GAAA3B,EAAA,eAAAzB,EAAAqD,GAA0C,OAAAzB,EAAA,MAAgBe,IAAAU,EAAAvB,YAAA,eAAAK,IAAyCC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAL,WAAApB,OAAuByB,EAAA6B,GAAA,MAAA7B,EAAAQ,GAAA,KAAAL,EAAA,OAAuCE,YAAA,SAAmBF,EAAA,KAAUE,YAAA,SAAmBL,EAAAQ,GAAAR,EAAAsB,GAAA/C,EAAAiB,SAAAQ,EAAAQ,GAAA,KAAAL,EAAA,KAAkDE,YAAA,WAAqBL,EAAAQ,GAAAR,EAAAsB,GAAA/C,EAAAuD,iBAAoC9B,EAAAQ,GAAA,KAAAL,EAAA,OAAwBE,YAAA,aAAsBL,EAAArD,MAAAmC,QAAAkB,EAAApD,OAAAoD,EAAA/C,YAAA+C,EAAAjD,UAAAiD,EAAA7C,MAAAgD,EAAA,WAAAH,EAAAuB,MAAA,OAAAvB,EAAAQ,GAAA,KAAAL,EAAA,OAAiIE,YAAA,oBAAA0B,aAA6CC,QAAA,UAAkBhC,EAAAQ,GAAA,4CAEzoEyB,iBADjB,WAAoC,IAAahC,EAAbrC,KAAasC,eAA0BC,EAAvCvC,KAAuCwC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,UCEvI,IAuBe+B,EAvBUC,EAAQ,OAcjCC,CACE3F,EACAqD,GATF,EAVA,SAAAuC,GACEF,EAAQ,SAaV,kBAEA,MAUgC,QCYhCG,GACA5F,KADA,WAEA,OACAS,MAAA,GACAoF,QACAlB,OAAA,GACAmB,GAAA,KAGAC,SAAYC,OACZ1E,OAAA2E,EAAA,EAAA3E,EAAA,qCAEAP,QAZA,WAYA,IAAAM,EAAAH,KACAyD,EAAAuB,OAAAvB,OAAAzD,KAAAiF,MAAAC,OAAAC,aACAnF,KAAAoF,YAAA5D,KACAxB,KAAA4E,GAAA,QAEA5E,KAAAyD,SAAA,KACIrD,OAAAC,EAAA,EAAAD,GAAJE,KAAA,SAAAC,GACA,GAAAA,EAAAzB,MAAAyB,EAAAzB,KAAAuG,KAAA,WACA,IAAA7E,EAAAD,EAAAzB,KAAA0B,OACAL,EAAAwE,KAAAnE,EAAAmE,SAIAzE,QAAW4E,OACX1E,OAAA2E,EAAA,EAAA3E,EACAkF,WAAA,aACAC,kBAAA,oBACAC,iBAAA,uBAEAC,UANA,SAMAlG,GACAS,KAAAT,QACAS,KAAAuF,kBAAAhG,IAEAyB,WAVA,WAWAhB,KAAAiF,MAAA/F,QAAA8B,cAEAM,WAbA,SAaAX,GACAX,KAAAiF,MAAAS,MAAAC,OACA3F,KAAAuF,kBAAAvF,KAAAT,OACAS,KAAA4F,QAAAhF,MAAAgB,KAAA,aAAAiE,OAAAlF,KAEAqB,aAlBA,SAkBAT,GACAvB,KAAAuF,kBAAAhE,EAAAI,OACA3B,KAAA4F,QAAAhF,MAAAgB,KAAA,eAAAiE,OAAAtE,KAEAQ,WAtBA,SAsBApB,GAGA,GAFAX,KAAAiF,MAAAS,MAAAC,OACA3F,KAAAuF,kBAAAvF,KAAAT,OACAS,KAAAoF,YAAA5D,IAAAxB,KAAAoF,YAAA5D,GAAA,IAAAb,EAAAa,GAAA,GACAxB,KAAA8F,KAAAC,KAAA,mBACA,CACA,IACAlF,EAAAF,EACAX,KAAAsF,YAAAU,KAFAhG,KAEAa,WAGAoF,MAjCA,WAkCAjG,KAAAT,MAAA,MAGAI,YACAuG,OAAAC,EAAA,EACAtH,WAAAyF,GAEAxE,OACAsG,iBADA,SACArG,GACAA,IACAC,KAAA4E,GAAA,WCxGeyB,GADElE,OAFP,WAAgB,IAAAC,EAAApC,KAAaqC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiB+D,IAAA,gBAAA7D,YAAA,WAAyCF,EAAA,OAAYW,aAAatB,KAAA,YAAAuB,QAAA,gBAAuCmD,IAAA,SAAA7D,YAAA,SAAkCF,EAAA,OAAYE,YAAA,gBAAAK,IAAgCC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAwD,QAAAW,IAAA,OAAqBnE,EAAAQ,GAAA,KAAAL,EAAA,SAA0BW,aAAatB,KAAA,QAAAuB,QAAA,UAAAC,MAAAhB,EAAA,MAAAiB,WAAA,UAAoEiD,IAAA,QAAA/C,OAAqB/D,KAAA,OAAAgH,YAAA,WAAsCC,UAAWrD,MAAAhB,EAAA,OAAoBU,IAAK4C,MAAA,SAAA1C,GAAyBA,EAAA0D,OAAAC,YAAsCvE,EAAA7C,MAAAyD,EAAA0D,OAAAtD,WAAgChB,EAAAQ,GAAA,KAAAL,EAAA,OAAwBW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,MAAApD,KAAA,MAAAqD,WAAA,eAAwEZ,YAAA,iBAAAK,IAAmCC,MAAA,SAAAC,GAAkD,OAAzBA,EAAAC,kBAAyBb,EAAA6D,MAAAjD,SAA2BZ,EAAAQ,GAAA,KAAAL,EAAA,UAA6B+D,IAAA,SAAA5D,OAAqBc,MAAA,OAAAC,OAAArB,EAAAqB,OAAAmD,SAAA,UAAmDrD,OAASsD,QAAA,GAAc/D,IAAKgE,YAAA1E,EAAApB,cAA8BuB,EAAA,OAAYG,OAAQc,MAAA,OAAAC,OAAA,OAAAsD,iBAAA3E,EAAAwC,MAAsDrC,EAAA,OAAYW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,OAAAhB,EAAA7C,MAAA8D,WAAA,WAAoEZ,YAAA,cAAA0B,aAAyCxB,iBAAA,UAAyBJ,EAAA,KAAUE,YAAA,UAAoBL,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAR,EAAA2B,GAAA3B,EAAA,cAAAzB,GAAgE,OAAA4B,EAAA,QAAkBe,IAAA3C,EAAAqG,MAAAvE,YAAA,mBAAAK,IAAkDC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAqD,UAAA9E,EAAAqG,WAA4B5E,EAAAQ,GAAA,eAAAR,EAAAsB,GAAA/C,EAAAqG,OAAA,mBAA2D,GAAA5E,EAAAQ,GAAA,KAAAL,EAAA,OAA4BW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,OAAAhB,EAAA7C,MAAA8D,WAAA,WAAoEZ,YAAA,mBAA+BF,EAAA,MAAWW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,MAAAhB,EAAA6E,kBAAA/F,OAAA,EAAAmC,WAAA,+BAA4GZ,YAAA,UAAsBF,EAAA,QAAaE,YAAA,SAAmBL,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,QAA0CE,YAAA,QAAAK,IAAwBC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAoD,yBAA2BjD,EAAA,KAAUE,YAAA,4BAAkCL,EAAAQ,GAAA,KAAAL,EAAA,OAA4BE,YAAA,gBAA0BF,EAAA,KAAAH,EAAA2B,GAAA3B,EAAA,2BAAAzB,EAAAqD,GAA8D,OAAAzB,EAAA,MAAgBe,IAAAU,EAAAvB,YAAA,cAAAK,IAAwCC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBb,EAAAqD,UAAA9E,OAAsB4B,EAAA,QAAaE,YAAA,SAAmBL,EAAAQ,GAAAR,EAAAsB,GAAA/C,MAAAyB,EAAAQ,GAAA,KAAAL,EAAA,QAAgDE,YAAA,SAAmBF,EAAA,KAAUE,YAAA,oCAAyCL,EAAAQ,GAAA,KAAAL,EAAA,cAAoCW,aAAatB,KAAA,OAAAuB,QAAA,SAAAC,MAAAhB,EAAA,MAAAiB,WAAA,UAAkEiD,IAAA,UAAA/C,OAAuBhE,MAAA6C,EAAA7C,OAAkBuD,IAAKd,aAAAI,EAAAJ,aAAAV,WAAAc,EAAAd,WAAAS,WAAAK,EAAAL,eAAyF,UAEtoFsC,oBCChC,IAcI6C,EAdqB3C,EAAQ,OAcjB4C,CACdzC,EACA2B,GAT6B,EAV/B,SAAoB5B,GAClBF,EAAQ,SAaS,kBAEU,MAUd6C,EAAA,QAAAF,EAAiB","file":"static/js/6.d67f86d52e2bfda5df28.js","sourcesContent":["<template>\r\n    <div class=\"search-result\" :style=\"{'pointer-events':'auto'}\">\r\n        <div class=\"suggest\">\r\n            <div class=\"search-suggest\" v-if=\"!searchShow && query && songs.length > 0\">\r\n                <p class=\"title\">最佳匹配</p>\r\n                <div class=\"search-suggest-item\"  @click.stop=\"singerDetail(suggest.artists[0])\" v-if=\"suggest.artists&&suggest.artists[0]\"><img v-lazy=\"suggest.artists[0].img1v1Url\" :key=\"suggest.artists[0].img1v1Url\" width=\"50\" height=\"50\"> <span>歌手：{{suggest.artists[0].name}}</span></div>\r\n                <div class=\"search-suggest-item\" @click.stop=\"songDetail(suggest.playlists[0])\" v-if=\"suggest.playlists&&suggest.playlists[0]\"><img v-lazy=\"suggest.playlists[0].coverImgUrl\" :key=\"suggest.playlists[0].coverImgUrl\" width=\"50\" height=\"50\">\r\n                    <div class=\"text\">\r\n                        <p>歌单：{{suggest.playlists[0].name}}</p>\r\n                        <p class=\"singer\" v-if=\"suggest.albums&&suggest.albums[0]\">{{suggest.albums[0].artist.name}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul class=\"suggest-list\">\r\n                <li class=\"suggest-item\" v-for=\"(item, index) in songs\" :key=\"index\" @click.stop=\"selectItem(item)\">\r\n                    <div class=\"icon\"><i></i></div>\r\n                    <div class=\"name\">\r\n                        <p class=\"song\">{{item.name}}</p>\r\n                        <p class=\"singer\">{{item.singer}}</p>\r\n                    </div>\r\n                </li>\r\n                <div class=\"loading\">\r\n                    <loading v-if=\"(songs.length>=limit||searching)&&haveMore && query\"></loading>\r\n                </div>\r\n            </ul>\r\n            <div class=\"no-result-wrapper\" style=\"display: none;\">\r\n                抱歉，暂无搜索结果\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport loading from '@/components/loading'\r\nimport { getSearchSongs, getSearchSuggest } from '@/base/api'\r\nimport { createSearchSong } from '@/base/song'\r\nexport default {\r\n  data () {\r\n    return {\r\n      songs: [],\r\n      limit: 30,\r\n      page: 1,\r\n      suggest: {},\r\n      haveMore: false,\r\n      searchShow: true,\r\n      searching: false\r\n    }\r\n  },\r\n  props: {\r\n    query: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  components: {\r\n    loading\r\n  },\r\n  mounted () {},\r\n  watch: {\r\n    query (val) {\r\n      if (val === '') {\r\n        this.suggest = {}\r\n        this.songs = []\r\n        this.haveMore = false\r\n        return\r\n      }\r\n      this.suggest = {}\r\n      this.songs = []\r\n      this.searchShow = true\r\n      this.page = 1\r\n      this.haveMore = true\r\n      this.search()\r\n    }\r\n  },\r\n  methods: {\r\n    search () {\r\n      this.searchShow = false\r\n      this.haveMore = true\r\n      this.searching = true\r\n      getSearchSongs(this.query, this.page)\r\n        .then(res => {\r\n          if (!res.data.result.songs) {\r\n            this.haveMore = false\r\n            return\r\n          }\r\n          let list = res.data.result.songs\r\n          let ret = []\r\n          list.forEach(item => {\r\n            ret.push(createSearchSong(item))\r\n          })\r\n          this.songs = ret\r\n          this.searching = false\r\n        })\r\n        .catch(e => {\r\n          this.searching = false\r\n        })\r\n      this.page += this.limit\r\n      getSearchSuggest(this.query).then(res => {\r\n        this.suggest = res.data.result\r\n      })\r\n    },\r\n    searchMore () {\r\n      if (!this.haveMore) {\r\n        return\r\n      }\r\n      if (!this.songs.length) {\r\n        return\r\n      }\r\n      getSearchSongs(this.query, this.page).then(res => {\r\n        let list = res.data.result.songs\r\n        if (!res.data.result.songs) {\r\n          this.haveMore = false\r\n          return\r\n        }\r\n        let ret = []\r\n        list.forEach(item => {\r\n          ret.push(createSearchSong(item))\r\n        })\r\n        this.songs = this.songs.concat(ret)\r\n        this.$emit('refresh')\r\n        this.page += this.limit\r\n      })\r\n    },\r\n    songDetail (item) {\r\n      const param = {id: item.id, image: item.coverImgUrl, title: item.name, playCount: item.playCount, trackCount: item.trackCount}\r\n      this.$emit('songDetail', param)\r\n    },\r\n    selectItem (item) {\r\n      this.$emit('selectItem', item)\r\n    },\r\n    singerDetail (item) {\r\n      const param = {id: item.id, image: item.img1v1Url, title: item.name}\r\n      this.$emit('singerDetail', param)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.search-result {\r\n  position: relative;\r\n  width: 100%;\r\n  top: 10px;\r\n  bottom: 0;\r\n  .suggest {\r\n    height: 100%;\r\n    overflow: hidden;\r\n    .search-suggest {\r\n      .title {\r\n        padding-left: 20px; /*no*/\r\n        padding-bottom: 10px; /*no*/\r\n        padding-top: 10px; /*no*/\r\n        color: #d44439;\r\n        font-size: 11px; /*no*/\r\n      }\r\n      .search-suggest-item {\r\n        display: flex;\r\n        -ms-flex-align: center;\r\n        align-items: center;\r\n        padding: 8px 20px; /*no*/\r\n        border-bottom: 1px solid #e4e4e4; /*no*/\r\n        font-size: 14px; /*no*/\r\n        img {\r\n          flex: 0 0 50px; /*no*/\r\n          padding-right: 15px; /*no*/\r\n        }\r\n        .text {\r\n          width: 100%;\r\n          p {\r\n            padding: 3px 0; /*no*/\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n          }\r\n          .singer {\r\n            font-size: 12px; /*no*/\r\n            color: #2e3030;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .suggest-list {\r\n      padding-bottom: 30px; /*no*/\r\n      .suggest-item {\r\n        display: flex;\r\n        padding: 3px 20px; /*no*/\r\n        height: 50px; /*no*/\r\n        -ms-flex-align: center;\r\n        align-items: center;\r\n        border-bottom: 1px solid #e4e4e4; /*no*/\r\n        .name {\r\n          flex: 1; /*no*/\r\n          font-size: 14px; /*no*/\r\n          color: #2e3030;\r\n          overflow: hidden;\r\n          p {\r\n            padding: 3px 0; /*no*/\r\n          }\r\n          .song {\r\n            font-size: 16px; /*no*/\r\n            color: #2e3030;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n          }\r\n          .singer {\r\n            font-size: 12px;\r\n            color: #757575;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\ndiv,\r\np,\r\nspan,\r\nh1,\r\nul,\r\nli {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  font-size: 100%;\r\n  font-weight: 400;\r\n  vertical-align: baseline;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/searchList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\",style:({'pointer-events':'auto'})},[_c('div',{staticClass:\"suggest\"},[(!_vm.searchShow && _vm.query && _vm.songs.length > 0)?_c('div',{staticClass:\"search-suggest\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"最佳匹配\")]),_vm._v(\" \"),(_vm.suggest.artists&&_vm.suggest.artists[0])?_c('div',{staticClass:\"search-suggest-item\",on:{\"click\":function($event){$event.stopPropagation();_vm.singerDetail(_vm.suggest.artists[0])}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.suggest.artists[0].img1v1Url),expression:\"suggest.artists[0].img1v1Url\"}],key:_vm.suggest.artists[0].img1v1Url,attrs:{\"width\":\"50\",\"height\":\"50\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"歌手：\"+_vm._s(_vm.suggest.artists[0].name))])]):_vm._e(),_vm._v(\" \"),(_vm.suggest.playlists&&_vm.suggest.playlists[0])?_c('div',{staticClass:\"search-suggest-item\",on:{\"click\":function($event){$event.stopPropagation();_vm.songDetail(_vm.suggest.playlists[0])}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.suggest.playlists[0].coverImgUrl),expression:\"suggest.playlists[0].coverImgUrl\"}],key:_vm.suggest.playlists[0].coverImgUrl,attrs:{\"width\":\"50\",\"height\":\"50\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('p',[_vm._v(\"歌单：\"+_vm._s(_vm.suggest.playlists[0].name))]),_vm._v(\" \"),(_vm.suggest.albums&&_vm.suggest.albums[0])?_c('p',{staticClass:\"singer\"},[_vm._v(_vm._s(_vm.suggest.albums[0].artist.name))]):_vm._e()])]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"suggest-list\"},[_vm._l((_vm.songs),function(item,index){return _c('li',{key:index,staticClass:\"suggest-item\",on:{\"click\":function($event){$event.stopPropagation();_vm.selectItem(item)}}},[_vm._m(0,true),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_c('p',{staticClass:\"song\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"singer\"},[_vm._v(_vm._s(item.singer))])])])}),_vm._v(\" \"),_c('div',{staticClass:\"loading\"},[((_vm.songs.length>=_vm.limit||_vm.searching)&&_vm.haveMore && _vm.query)?_c('loading'):_vm._e()],1)],2),_vm._v(\" \"),_c('div',{staticClass:\"no-result-wrapper\",staticStyle:{\"display\":\"none\"}},[_vm._v(\"\\n            抱歉，暂无搜索结果\\n        \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"icon\"},[_c('i')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-9e432c2a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/searchList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9e432c2a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":42}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./searchList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./searchList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./searchList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9e432c2a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./searchList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9e432c2a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/searchList.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"search\" ref=\"searchWrapper\">\r\n    <div class=\"head\" ref=\"header\" v-immersed1>\r\n      <div class=\"back iconfont\" @click.stop=\"$router.go(-1)\"></div>\r\n      <input type=\"text\" placeholder=\"搜索歌曲，歌手\" v-model=\"query\" ref=\"input\">\r\n      <div class=\"close iconfont\" @click.stop=\"clear\" v-show=\"this.query\"></div>\r\n    </div>\r\n    <scroll ref=\"scroll\" :pullup=\"true\" @scrollToEnd=\"searchMore\" :style=\"{width:'100%',height:height,'overflow':'hidden'}\">\r\n      <div :style=\"{width:'100%', height:'auto','padding-bottom':pt}\">\r\n        <div class=\"search-hots\" style=\"pointer-events: auto;\" v-show=\"!query\">\r\n          <p class=\"title\">热门搜索</p>\r\n          <span class=\"search-hots-item\" v-for=\"item in hots\" :key=\"item.first\" @click.stop=\"setSearch(item.first)\">\r\n            {{ item.first }}\r\n          </span>\r\n        </div>\r\n        <div class=\"search-history\" v-show=\"!query\">\r\n          <h1 class=\"title\" v-show=\"searchHistoryList.length>0\"><span class=\"text\">搜索历史</span> <span class=\"clear\" @click.stop=\"setSearchHistory([])\"><i class=\"icon-clear iconfont\"></i></span></h1>\r\n          <div class=\"search-list\">\r\n            <ul>\r\n              <li class=\"search-item\" v-for=\"(item,index) in searchHistoryList\" :key=\"index\" @click.stop=\"setSearch(item)\">\r\n                <span class=\"text\">{{item}}</span>\r\n                <span class=\"icon\"><i class=\"icon-delete iconfont\"></i></span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <searchList :query=\"query\" ref=\"suggest\" @singerDetail=\"singerDetail\" @songDetail=\"songDetail\" v-show=\"query\" @selectItem=\"selectItem\"></searchList>\r\n      </div>\r\n    </scroll>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport scroll from '@/components/scroll'\r\nimport { searchHot } from '@/base/api'\r\nimport { mapGetters, mapMutations } from 'vuex'\r\nimport searchList from '@/components/searchList'\r\nexport default {\r\n  data () {\r\n    return {\r\n      query: '',\r\n      hots: [],\r\n      height: '',\r\n      pt: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentSong', 'searchHistoryList'])\r\n  },\r\n  mounted () {\r\n    let height = screen.height - this.$refs.header.clientHeight\r\n    if (this.currentSong.id) {\r\n      this.pt = '60px'\r\n    }\r\n    this.height = `${height}px`\r\n    searchHot().then(res => {\r\n      if (res.data && res.data.code + '' === '200') {\r\n        const result = res.data.result\r\n        this.hots = result.hots\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      playBySong: 'PLAYBYSONG',\r\n      saveSearchHistory: 'SAVESEARCHHISTORY',\r\n      setSearchHistory: 'SET_SEARCHHISTORY'\r\n    }),\r\n    setSearch (query) {\r\n      this.query = query\r\n      this.saveSearchHistory(query)\r\n    },\r\n    searchMore () {\r\n      this.$refs.suggest.searchMore()\r\n    },\r\n    songDetail (item) {\r\n      this.$refs.input.blur()\r\n      this.saveSearchHistory(this.query)\r\n      this.$router.push({name: 'songDetail', params: item})\r\n    },\r\n    singerDetail (param) {\r\n      this.saveSearchHistory(param.title)\r\n      this.$router.push({name: 'singerDetail', params: param})\r\n    },\r\n    selectItem (item) {\r\n      this.$refs.input.blur()\r\n      this.saveSearchHistory(this.query)\r\n      if (this.currentSong.id && this.currentSong.id + '' === item.id + '') {\r\n        this.$bus.emit('player-show')\r\n      } else {\r\n        const self = this\r\n        const song = item\r\n        this.playBySong({self, song})\r\n      }\r\n    },\r\n    clear () {\r\n      this.query = ''\r\n    }\r\n  },\r\n  components: {\r\n    scroll,\r\n    searchList\r\n  },\r\n  watch: {\r\n    'currentSong.id' (val) {\r\n      if (val) {\r\n        this.pt = '60px'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/common/scss/icon.scss\";\r\n@import \"@/common/scss/index.scss\";\r\ndiv,\r\np,\r\nh1,\r\nul,\r\nli {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  font-size: 100%;\r\n  font-weight: 400;\r\n  vertical-align: baseline;\r\n}\r\n.search {\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  .head {\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    width: 100%;\r\n    height: 40px; /*no*/\r\n    box-sizing: border-box;\r\n    background: $color-theme;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    color: #f1f1f1;\r\n    top: 0px;\r\n    padding-top: 3px; /*no*/\r\n    .close {\r\n      &:before {\r\n        content: $icon-cha1;\r\n      }\r\n      height: 30px; /*no*/\r\n      width: 10%;\r\n      line-height: 30px; /*no*/\r\n      font-size: 15px; /*no*/\r\n      text-align: center;\r\n      box-sizing: border-box;\r\n      float: left;\r\n    }\r\n    .back {\r\n      &:before {\r\n        content: $icon-back;\r\n      }\r\n      height: 30px; /*no*/\r\n      width: 15%;\r\n      line-height: 30px;/*no*/\r\n      font-size: 28px; /*no*/\r\n      padding-left: 6px; /*no*/\r\n      box-sizing: border-box;\r\n      float: left;\r\n    }\r\n    input {\r\n      width: 75%;\r\n      height: 30px; /*no*/\r\n      line-height: 30px; /*no*/\r\n      margin: 0;\r\n      padding: 0;\r\n      border: 0;\r\n      font-size: 100%;\r\n      font-weight: 400;\r\n      vertical-align: baseline;\r\n      flex: 1;\r\n      background: #d44439;\r\n      color: #fff;\r\n      font-size: 14px; /*no*/\r\n      border: none;\r\n      float: left;\r\n      outline: medium;\r\n      &::placeholder {\r\n        color: rgba(255, 255, 255, 0.6);\r\n      }\r\n    }\r\n  }\r\n  .search-hots {\r\n    margin: 0 25px;\r\n    .title {\r\n      padding: 15px 5px 0; /*no*/\r\n      height: 30px; /*no*/\r\n      line-height: 30px; /*no*/\r\n      font-size: 12px; /*no*/\r\n      color: #757575;\r\n    }\r\n    span {\r\n      display: inline-block;\r\n      padding: 3px 5px; /*no*/\r\n      margin: 4px; /*no*/\r\n      border: 0.8px solid #c7c7c7;\r\n      border-radius: 5px; /*no*/\r\n      line-height: 20px; /*no*/\r\n      color: #2e3030;\r\n      font-size: 14px; /*no*/\r\n    }\r\n  }\r\n  .search-history {\r\n    position: relative;\r\n    margin: 10px 25px; /*no*/\r\n    .title {\r\n      display: flex;\r\n      -ms-flex-align: center;\r\n      align-items: center;\r\n      height: 30px; /*no*/\r\n      font-size: 12px; /*no*/\r\n      color: #757575;\r\n      .text {\r\n        flex: 1;\r\n      }\r\n      .clear {\r\n        position: relative;\r\n        .icon-clear {\r\n          font-size: 14px; /*no*/\r\n          color: #2e3030;\r\n          &:before {\r\n            content: $icon-delete;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .search-item {\r\n      display: flex;\r\n      -ms-flex-align: center;\r\n      align-items: center;\r\n      height: 35px; /*no*/\r\n      overflow: hidden;\r\n      font-size: 14px; /*no*/\r\n      .text {\r\n        flex: 1;\r\n        color: #2e3030;\r\n      }\r\n      .icon {\r\n        position: relative;\r\n        .icon-delete {\r\n          font-size: 11px; /*no*/\r\n          color: #2e3030;\r\n          &:before {\r\n            content: $icon-cha1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/views/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"searchWrapper\",staticClass:\"search\"},[_c('div',{directives:[{name:\"immersed1\",rawName:\"v-immersed1\"}],ref:\"header\",staticClass:\"head\"},[_c('div',{staticClass:\"back iconfont\",on:{\"click\":function($event){$event.stopPropagation();_vm.$router.go(-1)}}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索歌曲，歌手\"},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.query),expression:\"this.query\"}],staticClass:\"close iconfont\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clear($event)}}})]),_vm._v(\" \"),_c('scroll',{ref:\"scroll\",style:({width:'100%',height:_vm.height,'overflow':'hidden'}),attrs:{\"pullup\":true},on:{\"scrollToEnd\":_vm.searchMore}},[_c('div',{style:({width:'100%', height:'auto','padding-bottom':_vm.pt})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],staticClass:\"search-hots\",staticStyle:{\"pointer-events\":\"auto\"}},[_c('p',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_vm._l((_vm.hots),function(item){return _c('span',{key:item.first,staticClass:\"search-hots-item\",on:{\"click\":function($event){$event.stopPropagation();_vm.setSearch(item.first)}}},[_vm._v(\"\\n          \"+_vm._s(item.first)+\"\\n        \")])})],2),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],staticClass:\"search-history\"},[_c('h1',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistoryList.length>0),expression:\"searchHistoryList.length>0\"}],staticClass:\"title\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('span',{staticClass:\"clear\",on:{\"click\":function($event){$event.stopPropagation();_vm.setSearchHistory([])}}},[_c('i',{staticClass:\"icon-clear iconfont\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"search-list\"},[_c('ul',_vm._l((_vm.searchHistoryList),function(item,index){return _c('li',{key:index,staticClass:\"search-item\",on:{\"click\":function($event){$event.stopPropagation();_vm.setSearch(item)}}},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"icon-delete iconfont\"})])])}))])]),_vm._v(\" \"),_c('searchList',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"suggest\",attrs:{\"query\":_vm.query},on:{\"singerDetail\":_vm.singerDetail,\"songDetail\":_vm.songDetail,\"selectItem\":_vm.selectItem}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4bfba856\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/views/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4bfba856\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":42}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4bfba856\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4bfba856\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/views/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}